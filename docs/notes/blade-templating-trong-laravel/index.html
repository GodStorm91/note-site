<!DOCTYPE html><html lang="en" class="theme-light" data-astro-cid-37fxchfa> <head><meta charset="utf-8"><title>Blade Templating Trong Laravel</title><link rel="stylesheet" href="/_astro/_slug_.CSRUKxnt.css">
<link rel="stylesheet" href="/_astro/about.BLpm0Fy9.css"></head> <body data-astro-cid-37fxchfa> <div class="app-root" data-astro-cid-37fxchfa> <header class="app-header" data-astro-cid-37fxchfa> <div class="app-header-left" data-astro-cid-37fxchfa> <a href="/" class="app-logo" data-astro-cid-37fxchfa>ğŸ“ Blade Templating Trong Laravel</a> </div> <div class="app-header-right" data-astro-cid-37fxchfa> <a href="/tags" class="header-link" data-astro-cid-37fxchfa>Tags</a> <a href="/about" class="header-link" data-astro-cid-37fxchfa>About</a> <button id="theme-toggle" class="theme-toggle" type="button" data-astro-cid-37fxchfa>ğŸŒ™</button> </div> </header> <main class="app-main" data-astro-cid-37fxchfa>  <a href="/" class="muted" style="text-decoration: none;">â† Back to notes</a> <article class="markdown-body card" style="margin-top: 1.25rem; padding-top: 1.25rem;"><h1># Blade Templating trong Laravel</h1>
<p>Nhá»¯ng ai Ä‘Ã£ tá»«ng sá»­ dá»¥ng PHP cháº¯c háº³n Ä‘á»u tháº¥y nhá»©c Ä‘áº§u khi dÃ¹ng php Ä‘á»ƒ render ra view chÃºng ta pháº£i <code>&lt;?php</code> khÃ¡ nhiá»u, vÃ  Ä‘Ã´i khi cÃ²n cáº§n pháº£i dÃ¹ng <code>htmlentities</code> Ä‘á»ƒ escape kÃ­ tá»± html. Tháº­t lÃ  khá»• sá»Ÿ pháº£i khÃ´ng nÃ o. May máº¯n thay, Laravel lÃ  má»™t framework há»— trá»£ khÃ¡ tá»‘t cho viá»‡c render ra view, vá»›i viá»‡c buit-in má»™t templating engine khÃ¡ tá»‘t gá»i lÃ  Blade (cháº¯c lÃ  do Blade sá»­ dá»¥ng <code>{{</code> vÃ  <code>}}</code> Ä‘á»ƒ Ä‘Ã³ng má»Ÿ tag  - Giá»‘ng nhÆ° con dao cáº¡o váº­y). Tháº­t ra Blade khÃ¡ giá»‘ng vá»›i Razor templating cá»§a MVC framework (Microsoft .NET), giÃºp tÄƒng tÃ­nh dá»… Ä‘á»c cá»§a code - tÃ­nh chÃ­nh xÃ¡c - dá»… há»c + cá»±c kÃ¬ máº¡nh máº½ vá»›i cáº¥u trÃºc káº¿ thá»«a view dá»… hiá»ƒu vÃ  dá»… dÃ ng má»Ÿ rá»™ng. </p>
<p>VÃ­ dá»¥ :</p>
<pre><code class="language-php">// Kiá»ƒm tra xem User login hay chÆ°a
@if (Auth::check())
    //Hiá»ƒn thá»‹ Ä‘oáº¡n Hello {tÃªn user}, link sang profile page
    Hello {{Auth::user()-&gt;name}},&lt;a href=&#39;/profile&#39;&gt; Profile &lt;/a&gt;
@else
    //Hiá»ƒn thá»‹ link login
    &lt;a href=&#39;/login&#39;&gt;Login&lt;/a&gt;
</code></pre>
<p>BÃ i viáº¿t nÃ y sáº½ Ä‘Æ°a báº¡n Ä‘áº¿n cÃ¡c váº¥n Ä‘á»</p>
<ul>
<li>Giá»›i thiá»‡u vá» blade</li>
<li>CÃ¡c cáº¥u trÃºc cá»§a Blade<ul>
<li>Äiá»u kiá»‡n</li>
<li>VÃ²ng láº·p</li>
</ul>
</li>
<li>Káº¿ thá»«a blade</li>
<li>View composer vÃ  Inject service vÃ o trong view </li>
<li>Tuá»³ biáº¿n / Táº¡o má»›i chá»‰ lá»‡nh (directive) trong blade.</li>
</ul>
<p><em>Note:</em> Báº¡n quen vá»›i Symfony vÃ  Twig templating hÆ¡n Blade, báº¡n cÃ³ thá»ƒ enable Twig templating thay vÃ¬ Blade theo hÆ°á»›ng dáº«n nhÆ° bÃªn dÆ°á»›i : <a href="https://github.com/rcrowe/TwigBridge">https://github.com/rcrowe/TwigBridge</a></p>
<h2>Giá»›i thiá»‡u vá» Blade Templating - CÃ¡ch xuáº¥t data ra view</h2>
<p><code>{{</code> vÃ  <code>}}</code> dÃ¹ng Ä‘á»ƒ wrap nhá»¯ng pháº§n mÃ  báº¡n muá»‘n PHP xuáº¥t ra view. vÃ­ dá»¥ <code>{{ $variable }}</code>  thÃ¬ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i <code>&lt;?= $variable ?&gt;</code> . NhÆ°ng cÅ©ng cÃ³ Ä‘iá»ƒm khÃ¡c biá»‡t khi sá»­ dá»¥ng blade lÃ , Blade tá»± Ä‘á»™ng escape cho chÃºng ta. CÃ³ nghÄ©a <code>{{ $variable }}</code> chÃ­nh xÃ¡c hÆ¡n lÃ  giá»‘ng vá»›i <code>&lt;?= htmlentities($variable) ?&gt;</code> Náº¿u chÃºng ta muá»‘n echo mÃ  khÃ´ng escape thÃ¬ cÃ³ thá»ƒ gá»i <code>{{!! $variable !!}</code>  vÃ  blade sáº½ khÃ´ng escape.</p>
<blockquote>
<p><em>Note</em>: ChÃºng ta cÃ³ thá»ƒ há»i lÃ m sao phÃ¢n biá»‡t giá»¯a front-end frameworks (handlebars cháº³ng háº¡n) vÃ  blade, chÃºng ta cÃ³ thá»ƒ thÃªm <code>@</code> vÃ o trÆ°á»›c Ä‘á»ƒ phÃ¢n biá»‡t giá»¯a blade vÃ  handlebars nhÆ° bÃªn dÆ°á»›i </p>
</blockquote>
<pre><code class="language-php">// Blade templating
{{ $variable }}
// thÃªm @ vÃ o Ä‘áº§u, blade sáº½ bá» qua vÃ  output toÃ n bá»™ &quot;{{ $variable }}&quot;
@{{ $variable }}
</code></pre>
<blockquote>
</blockquote>
<h2>CÃ¡c cáº¥u trÃºc Ä‘á»ƒ Ä‘iá»u khiá»ƒn luá»“ng (Control Structures)</h2>
<p>CÃ¡c cáº¥u trÃºc Ä‘iá»u khiá»ƒn luá»“ng cá»§a blade cÅ©ng tÆ°Æ¡ng tá»± nhÆ° khi chÃºng ta dÃ¹ng PHP thuáº§n cÅ©ng bao gá»“m, <code>if, else</code> , <code>foreach</code> , <code>while</code> â€¦</p>
<h3>Äiá»u kiá»‡n (Conditionals)</h3>
<p>Blade cung cáº¥p cho ta cÃ¡c cáº¥u trÃºc Ä‘iá»u kiá»‡n nhÆ° bÃªn dá»©oi </p>
<h4>@if :</h4>
<p><code>@if</code> sáº½ Ä‘Æ°á»£c compile thÃ nh <code>&lt;?php if ($condition) : ?&gt;</code> . CÃ¡c báº¡n cÃ³ thá»ƒ xÃ¡c nháº­n láº¡i thÃ´ng qua viá»‡c kiá»ƒm tra view tÆ°Æ¡ng á»©ng trong <code>app\storage\views\{view_hash_id}.php</code> </p>
<pre><code class="language-php">@if count($tasks) == 1
    ban con lai 1 task
@elseif count($tasks) == 0
    khong con task nao trong he thong
@else
    Co tat ca {{ count($tasks) }} tasks con lai
@endif
</code></pre>
<h4>@unless</h4>
<p><code>@unless</code> tÆ°Æ¡ng tá»± nhÆ° <code>@if</code> , vÃ  nÃ³ <code>@unless ($condition)</code> sáº½ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i <code>@if (!$condition)</code></p>
<pre><code class="language-php">@unless (Auth::check())
    Please register before proceed.
@endunless
</code></pre>
<h3>VÃ²ng láº·p (Loops)</h3>
<h4>@for, @foreach, vÃ  @while:</h4>
<p>TÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i  PHP thuáº§n lÃ  <code>for, foreach , while</code> tuy nhiÃªn cÃ³ 1 lÆ°u Ã½ á»Ÿ bÃªn dÆ°á»›i </p>
<blockquote>
<p><em>LÆ°u Ã½:</em> Khi sá»­ dá»¥ng <code>@foreach</code> thÃ¬ Laravel sáº½ tá»± Ä‘á»™ng táº¡o má»™t <code>stdClass</code> object lÃ  <code>$loop</code> . ChÃºng ta cÃ³ thá»ƒ dÃ¹ng biáº¿n <code>$loop</code> Ä‘á»ƒ tham chiáº¿u Ä‘áº¿n cÃ¡c thuá»™c tÃ­nh nhÆ°: <code>first</code>, <code>last</code>, <code>depth</code> â€¦ 
Tham kháº£o vá» biáº¿n loop á»Ÿ Ä‘Ã¢y:  <a href="https://laravel.com/docs/5.6/blade#loops">Blade Templates - Laravel - The PHP Framework For Web Artisans</a></p>
</blockquote>
<h2>Káº¿ thá»«a</h2>
<p>Blade cung cáº¥p cho ta má»™t cáº¥u trÃºc Ä‘á»ƒ cÃ³ thá»ƒ káº¿ thá»«a, chá»‰nh sá»­a hoáº·c include cÃ¡c view khÃ¡c nhau.</p>
<h3>Äá»‹nh nghÄ©a thÃ nh pháº§n trong view báº±ng @section, @show vÃ  @yield</h3>
<p>BÃªn dÆ°á»›i lÃ  Ä‘oáº¡n code máº«u cá»§a <code>resources/views/layouts/master.blade.php</code></p>
<pre><code class="language-html">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt; My site | yield(&#39;title&#39;, &#39;Home Page&#39;) &lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div class=&quot;container&quot;&gt;
            @yield(&#39;content&#39;)
        &lt;/div&gt;
        @section(&#39;footerScripts&#39;)
            &lt;script src=&#39;app.js&#39;&gt;&lt;/script&gt;
        @show
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>ChÃºng ta sá»­ dá»¥ng hÃ m <code>yield</code> á»Ÿ 2 chá»—, vÃ  <code>@section</code> á»Ÿ má»™t chá»—.<br>Táº¥t cáº£ Ä‘á»u cÃ³ Ä‘iá»ƒm chung lÃ  chÃºng sáº½ cÃ³ thá»ƒ Ä‘Æ°á»£c má»Ÿ rá»™ng bá»Ÿi cÃ¡c view con. 
Váº­y thÃ¬ cÃ³ gÃ¬ khÃ¡c á»Ÿ Ä‘Ã¢y.</p>
<ul>
<li><code>@yield(â€˜contentâ€™)</code> : khÃ´ng cÃ³ gÃ­a trá»‹ default, cÃ³ nghÄ©a lÃ  náº¿u lá»›p con khÃ´ng thá»±c hiá»‡n extend pháº§n <code>content</code> thÃ¬ sáº½ khÃ´ng cÃ³ gÃ¬ hiá»ƒn thá»‹ cáº£</li>
<li><code>yield(â€˜titleâ€™, â€˜Home pageâ€™)</code>: á»Ÿ Ä‘Ã¢y chÃºng ta thiáº¿t láº­p giÃ¡ trá»‹ máº·c Ä‘á»‹nh cho <code>title</code> lÃ  <code>Home page</code>, tuy nhiÃªn lá»›p con cÃ³ thá»ƒ overwrite, vÃ  giÃ¡ trá»‹ <code>Home page</code> chá»‰ xuáº¥t hiá»‡n khi lá»›p con khÃ´ng thá»±c hiá»‡n extends pháº§n <code>title</code></li>
<li><code>@section</code> â€¦ <code>@show</code> thÃ¬ Ä‘á»‹nh nghÄ©a cáº£ giÃ¡ trá»‹ default vÃ  cho phÃ©p lá»›p con extends giÃ¡ trá»‹ Ä‘Ã³. ChÃºng ta cÃ³ thá»ƒ cho <code>footerScripts</code> include file <code>app.js</code> báº±ng chá»‰ lá»‡nh <code>@parent</code> .</li>
</ul>
<p>BÃªn dÆ°á»›i lÃ  vÃ­ dá»¥ má»™t views con extend view <code>master.blade.php</code></p>
<pre><code class="language-php">// resources/views/dashboard.blade.php
@extends(&#39;layouts.master&#39;)

@section(&#39;title&#39;, &#39;Dashboard&#39;) // overwrite `Home Page`

@section(&#39;content&#39;)
Welcome to your Dashboard
@endsection

@section(&#39;footerScripts&#39;)
    @parent
    &lt;script src=&#39;dashboard.js&#39;&gt;&lt;/script&gt;
@endsection
</code></pre>
<ul>
<li><code>@extends(&#39;layouts.masterâ€™)</code>: Ä‘á»‹nh nghÄ©a views nÃ y sáº½ Ä‘Æ°á»£c káº¿ thá»«a tá»« views <code>layouts.master</code></li>
<li><code>@section(&#39;title&#39;, &#39;Dashboard&#39;)</code>: Page nÃ y sáº½ cÃ³ title lÃ  <code>Dashboard</code> thay vÃ¬ lÃ  <code>Home page</code> , default cá»§a views <code>layouts.master</code> Ä‘Ã£ bá»‹ overwrite.</li>
<li>@section : Ä‘á»‹nh nghÄ©a tá»«ng section cá»§a views con. Náº¿u ta cÃ³ sá»­ dá»¥ng chá»‰ lá»‡nh <code>@parent</code> thÃ¬ ná»™i dung cá»§a section tá»« view cha sáº½ Ä‘Æ°á»£c insert vÃ o view con vÃ  chÃºng ta cÃ³ thá»ƒ tuá»³ biáº¿n thÃªm ná»™i dung. VÃ­ dá»¥ á»Ÿ trÃªn chÃºng ta má»Ÿ rá»™ng view cha, sau Ä‘Ã³ thÃªm thÆ° viá»‡n <code>dashboard.js</code></li>
</ul>
<h3>CÃ¡c chá»‰ lá»‡nh (directives) dÃ¹ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a cáº¥u trÃºc view</h3>
<h4>@extends</h4>
<p>Vá»›i chá»‰ lá»‡nh <code>@extends</code> chÃºng ta Ä‘á»‹nh nghÄ©a, views <code>dashboard</code> sáº½ Ä‘Æ°á»£c káº¿ thá»«a tá»« views <code>layouts.master</code>.  Má»—i má»™t views chá»‰ Ä‘Æ°á»£c káº¿ thá»«a duy nháº¥t má»™t views cha khÃ¡c.</p>
<h4>@sections vÃ  @endsections</h4>
<p>ChÃºng ta Ä‘á»‹nh nghÄ©a má»™t section báº±ng tá»« khoÃ¡ <code>@section</code> vÃ  <code>@endsection</code>  tuy nhiÃªn á»Ÿ lá»›p cha, (vÃ­ dá»¥ á»Ÿ trÃªn lÃ  <code>layouts.master</code> chÃºng ta káº¿t thÃºc Ä‘á»‹nh nghÄ©a section khÃ´ng pháº£i báº±ng chá»‰ lá»‡nh <code>@endsection</code> mÃ  báº±ng chá»‰ lá»‡nh <code>@show</code>. </p>
<h4>@parent</h4>
<p>Khi má»™t view con má»Ÿ rá»™ng má»™t view cha, chÃºng ta sáº½ cÃ³ 2 lá»±a chá»n </p>
<ul>
<li>Overwrite: ghi Ä‘Ã¨ lÃªn Ä‘á»‹nh nghÄ©a cá»§a view cha. ChÃºng ta sáº½ define ná»™i dung cá»§a view con trong khung section</li>
<li>Extends : má»Ÿ rá»™ng, add thÃªm thÃ´ng tin vÃ o view cha, báº±ng cÃ¡ch sá»­ dá»¥ng chá»‰  lá»‡nh <code>@parent</code> Ä‘á»ƒ láº¥y ná»™i dung á»Ÿ view cha. VÃ­ dá»¥ á»Ÿ trÃªn chÃºng ta muá»‘n include file javascript <code>app.js</code> mÃ  views cha Ä‘Ã£ include rá»“i nÃªn ta thÃªm chá»‰ lá»‡nh <code>@parent</code> .</li>
</ul>
<h4>@include</h4>
<p>Ta cÃ³ thá»ƒ include má»™t view khÃ¡c vÃ o Ä‘á»“ng thá»i truyá»n thÃªm parameters cho chÃºng thÃ´ng qua chá»‰ lá»‡nh <code>include</code>. Nhá»¯ng biáº¿n sá»‘ náº±m trong parent view cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c access á»Ÿ included view.</p>
<pre><code class="language-php">// View cha
&lt;div class=&quot;content&quot; data-page-name=&quot;{{ $pageName }}&quot;
    You should sign up for our beautiful app!!!
    @include(&#39;sign-up&#39;, [&#39;text&#39; =&gt; &#39;Check it out&#39;]);
&lt;/div&gt;
// sign-up views
&lt;div class=&#39;button&#39; data-page-name=&quot;{{ $pageName }}&quot;&gt; // pageName lÃ  biáº¿n sá»‘ cá»§a View cha
    {{ $text }} //$text lÃ  biáº¿n sá»‘ Ä‘Æ°á»£c view cha truyá»n vÃ o
&lt;/div&gt;
</code></pre>
<h4>@each</h4>
<p>ÄÃ´i khi chÃºng ta cáº§n thá»±c hiá»‡n láº·p vá»›i tá»«ng models sáº½ Ä‘Æ°á»£c truyá»n 1 partials view, chÃºng ta cÃ³ thá»ƒ thá»±c hiá»‡n Ä‘iá»u nÃ y thÃ´ng qua chá»‰ lá»‡nh <code>@each</code></p>
<pre><code class="language-php">@each(&#39;view.name&#39;, $jobs, &#39;job&#39;, &#39;view.empty&#39;)
</code></pre>
<blockquote>
<p><em>LÆ°u Ã½</em> : khi sá»­ dá»¥ng <code>@each</code> thÃ¬ chÃºng ta khÃ´ng truy cáº­p Ä‘Æ°á»£c biáº¿n cá»§a view cha ná»¯a. Náº¿u cáº§n pháº£i truy cáº­p chÃºng ta cÃ³ thá»ƒ dÃ¹ng <code>@foreach</code> rá»“i <code>@include</code> Ä‘á»ƒ truy cáº­p.</p>
</blockquote>
<h3>View Composer vÃ  inject Service component vÃ o trong Views</h3>
<h4>Binding thÃ´ng qua View composers</h4>
<p><em>View composers</em>: view composer sáº½ cho phÃ©p chÃºng ta Ä‘á»‹nh nghÄ©a /Khi cÃ³ báº¥t kÃ¬ view nÃ o Ä‘Æ°á»£c load thÃ¬ pháº£i cÃ³ data tÆ°Æ¡ng á»©ng Ä‘Æ°á»£c truyá»n cho chÃºng/. Giáº£ sá»­ chÃºng ta cÃ³ má»™t partial view gá»i lÃ  <code>sidebars</code> vÃ  trong sidebars luÃ´n luÃ´n cÃ³ 7 bÃ i post gáº§n nháº¥t hiá»ƒn thá»‹. ChÃºng ta cÃ³ thá»ƒ dÃ¹ng view composer Ä‘á»ƒ share 7 bÃ i post gáº§n nháº¥t Ä‘Ã³. VÃ  chÃºng ta cÃ³ Ä‘áº¿n 3 cÃ¡ch Ä‘á»ƒ thá»±c hiá»‡n Ä‘iá»u nÃ y</p>
<ul>
<li>Chia sáº» má»™t biáº¿n global (báº¥t kÃ¬ view nÃ o cÅ©ng access Ä‘Æ°á»£c biáº¿n nÃ y</li>
<li>Chia sáº» thÃ´ng qua closure</li>
<li>Chia sáº» thÃ´ng qua class</li>
</ul>
<h4>Chia sáº» má»™t biáº¿n global</h4>
<p>CÃ¡ch nhanh nháº¥t vÃ  Ä‘Æ¡n giáº£n nháº¥t. Tuy nhiÃªn cÃ³ nhÆ°á»£c Ä‘iá»ƒm lÃ  khÃ´ng pháº£i view nÃ o cÅ©ng cáº§n Ä‘áº¿n 7 bÃ i post gáº§n nháº¥t</p>
<pre><code class="language-php">//Service provider
public function boot(){
    view()-&gt;share(&#39;posts&#39;, Post::recent());
}
</code></pre>
<p>ChÃºng ta sá»­ dá»¥ng <code>view()-&gt;share()</code> Ä‘á»ƒ thá»±c hiá»‡n Ä‘iá»u nÃ y. ChÃºng ta cÃ³ thá»ƒ code Ä‘oáº¡n settings trÃªn bÃªn trong <code>App\Providers\ServiceProviders</code>  hÃ m <code>boot</code></p>
<h4>Closure based</h4>
<p>Sá»­ dá»¥ng closure Ä‘á»ƒ chia sáº» má»™t biáº¿n vá»›i má»™t view nhÆ° bÃªn dÆ°á»›i </p>
<pre><code class="language-php">view()-&gt;composer(&#39;partials.sidebar&#39;, function($view){
    $view-&gt;with(&#39;posts, Post::recent());
});
</code></pre>
<p>ChÃºng ta dÃ¹ng <code>view()-&gt;composer()</code> Ä‘á»ƒ thá»±c hiá»‡n chia sáº», tham sá»‘ Ä‘áº§u tiÃªn lÃ  tÃªn cá»§a views mÃ  chÃºng ta muá»‘n chia sáº», á»Ÿ Ä‘Ã¢y lÃ  <code>partials.sidebar</code> chÃºng ta hoÃ n toÃ n cÃ³ thá»ƒ chia sáº» vá»›i 1 máº£ng tÃªn cÃ¡c views. nhÆ° bÃªn dÆ°á»›i :</p>
<pre><code class="language-php">view()-&gt;composer([
&#39;partials.sidebar&#39;,
&#39;partials.footer&#39;,
&#39;partials.header&#39;,
], function($view){
    $view-&gt;with(&#39;posts, Post::recent());
});
</code></pre>
<p>ChÃºng ta cÃ³ thá»ƒ chia sáº» biáº¿n <code>posts</code> vá»›i ráº¥t nhiá»u views thÃ´ng qua phÆ°Æ¡ng phÃ¡p trÃªn. Táº¥t nhiÃªn lÃ  má»—i láº§n chÃºng ta láº¡i pháº£i Ä‘i cáº­p nháº­t cÃ¡i list view Ä‘Æ°á»£c chia sáº» nÃ yâ€¦</p>
<h4>Class based (ViewComposer class)</h4>
<p>CÃ¡ch máº¡nh nháº¥t vÃ  cÅ©ng Ä‘Æ°a ta Ä‘áº¿n kháº£ nÄƒng tuá»³ biáº¿n cao nháº¥t lÃ  sá»­ dá»¥ng ViewComposer. á» Ä‘Ã¢y thay vÃ¬ dÃ¹ng closure thÃ¬ chÃºng ta sáº½ táº¡o háº³n má»™t class má»›i vÃ  viáº¿t logic chia sáº» biáº¿n bÃªn trong method <code>composer</code> cá»§a class Ä‘Ã³.  CÃ¡c step Ä‘á»ƒ thá»±c hiá»‡n bao gá»“m</p>
<ul>
<li>Viáº¿t má»™t class <code>RecentPostsComposer</code> cháº³ng háº¡n </li>
<li>Viáº¿t logic chia sáº» biáº¿n bÃªn trong method <code>composer</code> cá»§a class vá»«a táº¡o </li>
<li>Binding composer vá»«a táº¡o vÃ o Service Provider. MÃ¬nh lÆ°á»i thÃ¬ mÃ¬nh hay binding tháº³ng vÃ o trong <code>AppServiceProvider</code> tuy nhiÃªn cÃ¡c báº¡n nÃªn cáº¥u trÃºc má»™t Service Provider chuyÃªn vá» ViewComposer, vÃ  chÃºng ta sáº½ binding trong Service Provider Ä‘Ã³ nhÆ° trong bÃ i nÃ y <a href="https://viblo.asia/p/huong-dan-su-dung-view-composer-trong-laravel-53-3P0lPONbZox">https://viblo.asia/p/huong-dan-su-dung-view-composer-trong-laravel-53-3P0lPONbZox</a></li>
</ul>
<p><em>Code tham kháº£o</em></p>
<pre><code class="language-php">namespace App\Http\ViewComposers;

use App\Post;
use Illuminate\Contracts\View\View;

class RecentPostComposer{
    //Constructor
    public function __construct(Post $post){
        $this-&gt;post = $post;
    }
    // Compose view, thÃªm nhá»¯ng biáº¿n chÃºng ta muá»‘n chia sáº» vÃ o Ä‘Ã¢y.
    public function compose(View $view){
        $view-&gt;with(&#39;posts&#39;, $this-&gt;posts-&gt;recent());
    }
}

//Binding bÃªn trong App service Provider
public function boot(){
    ...
    view()-&gt;composer(
    &#39;partials.sidebar&#39;,
    \App\Http\ViewComposers\RecentPostsComposer::class);
}
 
</code></pre>
<p>ChÃºng ta cÃ³ thá»ƒ tháº¥y viá»‡c binding tÆ°Æ¡ng tá»± nhÆ° khi chÃºng ta dÃ¹ng closure, chÃºng ta truyá»n tÃªn class vÃ  Laravel sáº½ tá»± Ä‘á»™ng cháº¡y hÃ m <code>compose</code> trong class Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh vÃ  tráº£ vá» 7 bÃ i viáº¿t gáº§n nháº¥t.</p>
<h4>Inject Service component vÃ o trong blade</h4>
<p>ChÃºng ta cÃ³ 2 cÃ¡ch Ä‘á»ƒ inject má»™t service vÃ o trong blade. 
CÃ¡ch thá»© nháº¥t lÃ  thÃ´ng qua route definition nhÆ° bÃªn dÆ°á»›i </p>
<pre><code class="language-php">Route::get(&#39;backend/sales&#39;, function(SalesService $salesSvc){
    return view(&#39;sales.graph&#39;)
    -&gt;with(&#39;salesSvc&#39;, $salesSvc);
}
</code></pre>
<p>vÃ  phÃ­a blade cÃ³ thá»ƒ sá»­ dá»¥ng biáº¿n <code>$salesSvc</code> thoáº£i mÃ¡i. 
CÃ¡ch thá»© hai lÃ  chÃºng ta cÃ³ thá»ƒ inject service vÃ o trong trong blade view nhÆ° bÃªn dÆ°á»›i :</p>
<pre><code class="language-php">// sales/graph.blade.php
@inject(&#39;salesSvc&#39;, &#39;App\Services\SalesService&#39;);
Total sales is: {{ $salesSvc-&gt;total() }}
</code></pre>
<p>Ta tháº¥y viá»‡c inject Services thÃ´ng qua <code>@inject</code> giÃºp chÃºng ta dá»… dÃ ng gá»i Ä‘Æ°á»£c cÃ¡c hÃ m cá»§a Services mÃ  khÃ´ng cáº§n pháº£i chá»‰nh sá»­a <code>Controllers</code> hay Ä‘á»‹nh nghÄ©a <code>Routes</code>.</p>
<h3>Tuá»³ biáº¿n chá»‰ lá»‡nh cá»§a blade (Blade Directives)</h3>
<p>Cuá»‘i cÃ¹ng, cÃ¡c báº¡n cÃ³ thá»ƒ tá»± há»i, chÃºng ta cÃ³ thá»ƒ tá»± viáº¿t chá»‰ lá»‡nh cá»§a riÃªng mÃ¬nh nhÆ° khi chÃºng ta custom JSTL khÃ´ng?, cÃ¢u tráº£ lá»i táº¥t nhiÃªn lÃ  â€œCÃ“â€ .
Giáº£ sá»­ chÃºng ta thÆ°á»ng gáº·p pháº£i nháº¥t lÃ  check quyá»n cháº³ng háº¡n </p>
<pre><code class="language-php">@if (Auth::check() ) //Ä‘oáº¡n nÃ y chÃºng ta tháº¥y láº·p Ä‘i láº·p láº¡i cá»±c nhiá»u 
You are logging in
@else
Please login
@endif
</code></pre>
<p>MÃ¬nh muá»‘n rÃºt gá»n láº¡i thÃ nh:</p>
<pre><code class="language-php">@ifLoggedIn
    You are logging in
@else
    Please login
@endif
</code></pre>
<p>Äiá»u nÃ y lÃ  hoÃ n toÃ n cÃ³ thá»ƒ náº¿u chÃºng ta nhÆ° bÃªn dÆ°á»›i </p>
<pre><code class="language-php">//AppServiceProvider
public function boot(){
    Blade::directive(&#39;ifLoggedIn&#39;, function(){
        return &quot;&lt;?php if (auth()-&gt;check()): ?&gt;&quot;;
    });
}
</code></pre>
<p>á» Ä‘oáº¡n code trÃªn chÃºng ta tráº£ vá» má»™t string vÃ  sáº½ Ä‘Æ°á»£c thá»±c thi bá»Ÿi PHP.  Äiá»u nÃ y cÃ³ nghÄ©a gÃ¬? ChÃºng ta sáº½ giáº¥u táº¥t cáº£ nhá»¯ng logic phá»©c táº¡p <code>isHuman() &amp;&amp; age() &gt; 18</code> â€¦ vÃ¢ng vÃ¢ng phÃ­a sau nhá»¯ng chá»‰ lá»‡nh nhÆ° <code>@ifAdult</code> cháº³ng háº¡n. ChÃºng ta sáº½ khÃ´ng cáº§n pháº£i láº·p Ä‘i láº·p láº¡i chÃºng vÃ  khi logic <code>ifAdult</code> thay Ä‘á»•i, chÃºng ta chá»‰ viá»‡c update láº¡i logic cá»§a chá»‰ lá»‡nh.</p>
<h2>Káº¿t luáº­n</h2>
<p>Blade lÃ  má»™t cÃ´ng cá»¥ dÃ¹ng Ä‘á»ƒ render view cá»±c kÃ¬ hiá»‡u quáº£ cá»§a Laravel vá»›i má»¥c tiÃªu trong sÃ¡ng - chÃ­nh xÃ¡c - vÃ  mang tÃ­nh biá»ƒu hiá»‡n. ChÃºng ta Ä‘Æ¡n giáº£n hoÃ¡ viá»‡c sá»­ dá»¥ng <code>&lt;?php echo ?&gt;</code> vá»›i blade. NgoÃ i ra blade cÅ©ng há»— trá»£ cá»±c tá»‘t cho viá»‡c cáº¥u trÃºc káº¿ thÆ°Ã  cÅ©ng nhÆ° má»Ÿ rá»™ng view thÃ´ng qua <code>yield()</code> <code>section</code> hay <code>@parent</code> Ä‘á»ƒ thá»±c hiá»‡n káº¿ thá»«a lá»›p cha. 
ViewComposer cung cáº¥p cho ta má»™t cÃ´ng cá»¥ Ä‘á»ƒ chia sáº» thÃ´ng tin / data giá»¯a cÃ¡c view ráº¥t hiá»‡u quáº£. ChÃºng ta cÅ©ng cÃ³ thá»ƒ inject má»™t service class trá»±c tiáº¿p vÃ o trong blade thÃ´ng qua <code>@inject</code></p>
<p>#technology #publish</p>
<!-- {BearID:1B4B441F-FE8C-4EA5-8A95-A9DB2B126BA4-7689-00002384BD1568C9} -->
</article> <div style="margin-top: 1rem; font-size: 0.85rem;" class="muted">
Tags:
<a href="/tags/technology" class="tag-pill">
#technology </a> </div><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" onload="window.hljs && window.hljs.highlightAll()"></script>  </main> </div> <script>
      const root = document.documentElement;
      const btn = document.getElementById('theme-toggle');
      const stored = window.localStorage.getItem('note-theme');
      if (stored === 'dark') {
        root.classList.remove('theme-light');
        root.classList.add('theme-dark');
        if (btn) btn.textContent = 'â˜€ï¸';
      }
      btn?.addEventListener('click', () => {
        const isDark = root.classList.toggle('theme-dark');
        root.classList.toggle('theme-light', !isDark);
        window.localStorage.setItem('note-theme', isDark ? 'dark' : 'light');
        if (btn) btn.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
      });
    </script> </body> </html> 